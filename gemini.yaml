---
systems:
  gemini:
    extends:
      - ollama
    functions:
      chat:
        driver: gemini
      chatContinue:
        driver: gemini
      chatStop:
        driver: gemini
      chatListen:
        driver: gemini

drivers:
  gemini:
    engine:
      default:
        model: gemini-2.0-flash
        system_prompt: >
          You are an assistant to software engineers. They already know basics of
          software engineering. Make your response brief and to the point. You can
          use the tool web_request to fetch content from internet. Only whiltelisted
          sites are allowed including "www.alphavantage.co" and "api.github.com". The
          return of the tool call is always a json object. You should parse that
          before you use it, so the data can be properly decoded. The tool get_file_from_github
          can be used to fetch file content from github.
        temperature: 0.001
    tools:
      get_file_from_github:
        tool:
          functionDeclarations:
            - name: get_file_from_github
              description: get file content from github
              parameters:
                type: object
                properties:
                  git_repo:
                    type: string
                    description: the combined string with user name and repo name, for example myorg/myrepo.
                  path:
                    type: string
                    decription: the path of the file in the repo, for example /src/index.js
                  git_ref:
                    type: string
                    description: >
                      the branch name, tag name or a commit hash, if missing
                      HEAD branch will be used, for example v1.2, d3e456a or
                      main. Don't assume the head branch is main or master, use
                      blank if uncertain.
                required:
                  - git_repo
                  - path
        workflow:
          call_workflow: ai/get_file_from_github

      web_request:
        tool:
          functionDeclarations:
            - name: web_request
              description: |
                This function enables the AI mode to access internet. It fetches
                the content of a web page at the given url.
              parameters:
                type: object
                properties:
                  URL:
                    type: string
                    description: the url for the web page. Don't encode & to '&amp'; don't encode anything.
                requried:
                  - URL
        workflow:
          call_workflow: ai/web_request
